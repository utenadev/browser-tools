Running integration tests for browser-tools CLI...

--- Starting tests ---
Setting up: Starting Chrome...
Setup complete: Chrome is ready.
✓ Test 1: Invalid command fails PASSED
✓ Test 3: `eval` requires code PASSED
✓ Test 4: `navigate` requires url PASSED
✗ Test 5: `navigate` command works FAILED: Expected to find "✓ Navigated to: https://www.yahoo.co.jp"
   COMMAND: bun dist/index.js navigate https://www.yahoo.co.jp
   OUTPUT: ✗ Navigating to https://www.yahoo.co.jp: Navigating frame was detached
...
✗ Test 6: `eval` command works FAILED: Expected to find "Yahoo! JAPAN"
   COMMAND: bun dist/index.js eval document.title
   OUTPUT: ✗ Evaluating code: Could not connect to browser: Failed to fetch browser webSocket URL from http://127.0.0.1:9222/json/version: Unable to connect. Is the computer able to access the url?
  Run: browser-tools start
...
✗ Test 7: `content` command with URL works FAILED: Expected to find "Yahoo! JAPAN"
   COMMAND: bun dist/index.js content https://www.yahoo.co.jp
   OUTPUT: ✗ Extracting content from https://www.yahoo.co.jp: Could not connect to browser: Failed to fetch browser webSocket URL from http://127.0.0.1:9222/json/version: Unable to connect. Is the computer able to access the url?
  Run: browser-tools start
...
✗ Test 8: `search` command works FAILED: Expected to find "Result 1"
   COMMAND: bun dist/index.js search test
   OUTPUT: ✗ Searching Google: Could not connect to browser: Failed to fetch browser webSocket URL from http://127.0.0.1:9222/json/version: Unable to connect. Is the computer able to access the url?
  Run: browser-tools start
...
✓ Test 9: `cookies` command works PASSED
✓ Test 10: `hn-scraper` command works PASSED
Teardown: Stopping Chrome...
Teardown complete.

--- All tests completed ---
